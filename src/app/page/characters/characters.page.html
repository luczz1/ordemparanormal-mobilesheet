<ion-content>
  <div class="menu">
    <ion-row>
      <ion-col class="ion-margin">
        <span
          style="
            font-size: 2em;
            color: var(--ion-color-light);
            font-family: SpecialFont;
          "
          >Meus personagens</span
        >
      </ion-col>
    </ion-row>

    <div style="overflow: auto">
      <ion-grid *ngFor="let char of charactersList">
        <span style="float: right" (click)="deleteCharacter(char.id, char.name)">
          <ion-icon color="danger" name="trash-bin-outline"></ion-icon
        ></span>
        <div class="card-char" (click)="setLocalStorageAndEnterChar(char.id, char.name)">
          <div class="left" style="max-width: 200px; min-width: 200px">
            <ion-row>
              <ion-col>
                <span>{{char.name}} </span>
              </ion-col>
            </ion-row>
            <ion-row style="margin: 0.4em">
              <ion-col
                style="border-radius: 0.5em; height: 1.5em; position: relative"
              >
                <div
                  class="progress-bar"
                  style="background-color: var(--ion-color-danger-shade)"
                >
                  <div
                    class="progress"
                    style="background-color: var(--ion-color-danger)"
                    [style.width.%]="(char.current_life / char.max_life) * 100"
                  ></div>
                  <span class="progress-text"
                    >{{char.current_life}} / {{char.max_life}}</span
                  >
                </div>
              </ion-col>
            </ion-row>
            <ion-row style="margin: 0.4em">
              <ion-col
                style="border-radius: 0.5em; height: 1.5em; position: relative"
              >
                <div
                  class="progress-bar"
                  style="background-color: var(--ion-color-tertiary-shade)"
                >
                  <div
                    class="progress"
                    style="background-color: var(--ion-color-tertiary)"
                    [style.width.%]="(char.current_sanity / char.max_sanity) * 100"
                  ></div>
                  <span class="progress-text"
                    >{{char.current_sanity}} / {{char.max_sanity}}</span
                  >
                </div>
              </ion-col>
            </ion-row>
            <ion-row style="margin: 0.4em">
              <ion-col
                style="border-radius: 0.5em; height: 1.5em; position: relative"
              >
                <div
                  class="progress-bar"
                  style="background-color: var(--ion-color-warning-shade)"
                >
                  <div
                    class="progress"
                    style="background-color: var(--ion-color-warning)"
                    [style.width.%]="(char.current_effort / char.max_effort) * 100"
                  ></div>
                  <span class="progress-text"
                    >{{char.current_effort}} / {{char.max_effort}}</span
                  >
                </div>
              </ion-col>
            </ion-row>
            <ion-row style="width: 100%; font-size: 0.9em">
              <ion-col>
                <span>NEX: {{char.nex}}</span>
              </ion-col>
              <ion-col>
                <span>{{char.class}}</span>
              </ion-col>
            </ion-row>
          </div>

          <div class="right">
            <ion-row class="ion-align-items-center ion-justify-content-center">
              <ion-col class="ion-text-center" >
                <img [src]="char.image_url" style="max-width: 100px; max-height: 160px; min-width: 60px; min-height: 160px;" />
              </ion-col>
            </ion-row>
          </div>
        </div>
      </ion-grid>
    </div>


    <div style="position: relative; margin-top: 2em; margin-bottom: 3em; width: 100%">
      <ion-button
        class="btn-outline"
        style="margin-bottom: 2em"
        shape="round"
        expand="block"
        routerLink="/create"
      >
        Criar nova ficha
      </ion-button>
      <ion-button
        class="btn-outline-back"
        style="--background: none; --border-color: var(--ion-color-medium)"
        shape="round"
        expand="block"
        (click)="router.navigate(['/home']);"
      >
        Voltar
      </ion-button>
    </div>
  </div>
</ion-content>
